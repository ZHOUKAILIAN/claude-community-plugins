# DESIGN-009: æ–‡æ¡£ç¼–å·ç³»ç»Ÿ - æŠ€æœ¯è®¾è®¡

## 1. æŠ€æœ¯æ¶æ„æ¦‚è¿°

### 1.1 æ•´ä½“è®¾è®¡æ€è·¯

æœ¬è®¾è®¡åœ¨â€œç¼–å·ç³»ç»Ÿ + æ–‡æ¡£ä¸æ’ä»¶è§„èŒƒåŒ–å·¥å…·é“¾â€ä¸¤æ¡ä¸»çº¿ä¸Šæ¨è¿›ï¼Œé‡‡ç”¨**è½»é‡çº§ã€è‡ªåŠ¨åŒ–ã€AI é©±åŠ¨**çš„è®¾è®¡ç†å¿µï¼š

1. **æ— æ•°æ®åº“ä¾èµ–**ï¼šé€šè¿‡æ–‡ä»¶ç³»ç»Ÿæ‰«æè·å–ç¼–å·ä¿¡æ¯ï¼Œæ— éœ€é¢å¤–å­˜å‚¨
2. **AI è‡ªåŠ¨åŒ–**ï¼šåˆ©ç”¨ Claude Code çš„ AI èƒ½åŠ›è‡ªåŠ¨æ‰§è¡Œç¼–å·åˆ†é…é€»è¾‘
3. **è§„èŒƒåµŒå…¥**ï¼šå°†ç¼–å·è§„èŒƒåµŒå…¥ CLAUDE.md å’Œæ¨¡æ¿ä¸­ï¼Œç¡®ä¿ AI è‡ªåŠ¨éµå¾ª
4. **å·¥å…·é“¾æ ‡å‡†åŒ–**ï¼šé€šè¿‡æ¨¡æ¿/è„šæ‰‹æ¶/æ ¡éªŒ/æµ‹è¯•/è¿ç§»å·¥å…·ç»Ÿä¸€ Commands/Skills è´¨é‡
5. **å‘åå…¼å®¹**ï¼šæ”¯æŒç°æœ‰é¡¹ç›®å¹³æ»‘è¿ç§»ï¼Œä¸ç ´åå·²æœ‰æ–‡æ¡£ç»“æ„

### 1.2 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI (Claude Code)                      â”‚
â”‚  - è¯»å– CLAUDE.md ä¸­çš„ç¼–å·è§„èŒƒ                             â”‚
â”‚  - è‡ªåŠ¨æ‰«æ docs/requirements/ è·å–æœ€å¤§ç¼–å·                â”‚
â”‚  - åˆ†é…æ–°ç¼–å·å¹¶åˆ›å»ºé…å¯¹æ–‡æ¡£                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ–‡æ¡£ç¼–å·è§„èŒƒ (CLAUDE.md)                      â”‚
â”‚  - ç¼–å·æ ¼å¼å®šä¹‰                                           â”‚
â”‚  - é…å¯¹å…³ç³»è¯´æ˜                                           â”‚
â”‚  - è‡ªåŠ¨åŒ–æµç¨‹æŒ‡å¯¼                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ–‡æ¡£æ¨¡æ¿ç³»ç»Ÿ                             â”‚
â”‚  requirements-template.md                                â”‚
â”‚  technical-design-template.md                            â”‚
â”‚  (åŒ…å«ç¼–å·å ä½ç¬¦ {{DOC_NUMBER}} å’Œä½¿ç”¨è¯´æ˜)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 init-doc-driven-dev                      â”‚
â”‚  - åˆ›å»ºåˆå§‹ç¼–å·æ–‡æ¡£ (001-xxx.md)                          â”‚
â”‚  - ç”ŸæˆåŒ…å«ç¼–å·è§„èŒƒçš„ CLAUDE.md                           â”‚
â”‚  - å»ºç«‹æ–‡æ¡£ç»“æ„                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. æŠ€æœ¯æ ˆé€‰æ‹©

### 2.1 æ ¸å¿ƒæŠ€æœ¯

| æŠ€æœ¯ | ç”¨é€” | ç†ç”± |
|------|------|------|
| Bash | æ–‡ä»¶æ‰«æã€ç¼–å·æå– | Claude Code åŸç”Ÿæ”¯æŒï¼Œé«˜æ•ˆç®€æ´ |
| Glob | æ–‡ä»¶æ¨¡å¼åŒ¹é… | å¿«é€Ÿå®šä½ç¼–å·æ–‡æ¡£ |
| Grep | ç¼–å·æ ¼å¼éªŒè¯ | æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ |
| Markdown | æ–‡æ¡£æ ¼å¼ | é¡¹ç›®æ ‡å‡†æ ¼å¼ |

### 2.2 ä¸ä½¿ç”¨çš„æŠ€æœ¯

- âŒ æ•°æ®åº“ï¼šå¢åŠ å¤æ‚åº¦ï¼Œè¿èƒŒè½»é‡çº§åŸåˆ™
- âŒ é…ç½®æ–‡ä»¶ï¼šç¼–å·ä¿¡æ¯å¯ä»æ–‡ä»¶ç³»ç»Ÿç›´æ¥è·å–
> è¯´æ˜ï¼šæœ¬è®¾è®¡ä¼šæ–°å¢è„šæ‰‹æ¶ã€æ ¡éªŒã€è¿ç§»ç­‰è„šæœ¬ä»¥æ»¡è¶³ REQ-009 åˆå¹¶èŒƒå›´çš„å·¥å…·é“¾è¦æ±‚ã€‚

## 3. è¯¦ç»†è®¾è®¡

### 3.1 ç¼–å·åˆ†é…ç®—æ³•

#### 3.1.1 æ‰«æé€»è¾‘

```bash
# AI è‡ªåŠ¨æ‰§è¡Œçš„å‘½ä»¤
ls docs/requirements/ | grep -E '^[0-9]{3}-' | sort -r | head -1
```

**è¾“å‡ºç¤ºä¾‹**ï¼š`008-commands-skills-optimization.md`

#### 3.1.2 ç¼–å·æå–

```bash
# æå–ç¼–å·éƒ¨åˆ†
echo "008-commands-skills-optimization.md" | cut -d'-' -f1
# è¾“å‡º: 008
```

#### 3.1.3 ä¸‹ä¸€ä¸ªç¼–å·è®¡ç®—

```bash
# è½¬æ¢ä¸ºæ•´æ•°å¹¶åŠ  1
next_num=$((10#008 + 1))
# æ ¼å¼åŒ–ä¸ºä¸‰ä½æ•°
printf "%03d" $next_num
# è¾“å‡º: 009
```

#### 3.1.4 AI è‡ªåŠ¨åŒ–æµç¨‹

AI åœ¨åˆ›å»ºæ–°æ–‡æ¡£å‰è‡ªåŠ¨æ‰§è¡Œï¼š

```
1. æ‰«æ docs/requirements/ ç›®å½•
2. æå–æœ€å¤§ç¼–å·ï¼ˆå¦‚ 008ï¼‰
3. è®¡ç®—ä¸‹ä¸€ä¸ªç¼–å·ï¼ˆ009ï¼‰
4. åˆ›å»ºé…å¯¹æ–‡æ¡£ï¼š
   - æ–‡ä»¶åï¼š009-feature-name.md
   - æ ‡é¢˜ï¼š# REQ-009: åŠŸèƒ½åç§°
```

### 3.2 CLAUDE.md ç¼–å·è§„èŒƒæ¨¡æ¿

åœ¨ç”Ÿæˆçš„ CLAUDE.md ä¸­æ·»åŠ ä»¥ä¸‹ç« èŠ‚ï¼š

```markdown
## æ–‡æ¡£ç¼–å·è§„èŒƒ

### ç¼–å·æ ¼å¼

æ‰€æœ‰éœ€æ±‚æ–‡æ¡£å’ŒæŠ€æœ¯è®¾è®¡æ–‡æ¡£å¿…é¡»ä½¿ç”¨ç»Ÿä¸€çš„ç¼–å·æ ¼å¼ï¼š

**æ–‡ä»¶åæ ¼å¼**ï¼š
- éœ€æ±‚æ–‡æ¡£ï¼š`docs/requirements/NNN-feature-name.md`
- æŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼š`docs/design/NNN-feature-name-technical-design.md`
- ç¼–å·æ ¼å¼ï¼šä¸‰ä½æ•°å­—ï¼ˆ001-999ï¼‰ï¼Œå‰å¯¼é›¶ä¸å¯çœç•¥

**æ–‡æ¡£æ ‡é¢˜æ ¼å¼**ï¼š
- éœ€æ±‚æ–‡æ¡£ï¼š`# REQ-NNN: åŠŸèƒ½åç§°`
- æŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼š`# DESIGN-NNN: åŠŸèƒ½åç§° - æŠ€æœ¯è®¾è®¡`

### ç¼–å·é…å¯¹

æ¯ä¸ªéœ€æ±‚æ–‡æ¡£å¿…é¡»æœ‰å¯¹åº”çš„æŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼Œä½¿ç”¨ç›¸åŒç¼–å·ï¼š

**ç¤ºä¾‹**ï¼š
```
æ–‡ä»¶åï¼š
docs/requirements/009-document-numbering-system.md
docs/design/009-document-numbering-system-technical-design.md

æ–‡æ¡£æ ‡é¢˜ï¼š
# REQ-009: æ–‡æ¡£ç¼–å·ç³»ç»Ÿ
# DESIGN-009: æ–‡æ¡£ç¼–å·ç³»ç»Ÿ - æŠ€æœ¯è®¾è®¡
```

### ç¼–å·åˆ†é…æµç¨‹

**AI è‡ªåŠ¨åŒ–æµç¨‹**ï¼ˆæ— éœ€äººå·¥å¹²é¢„ï¼‰ï¼š

1. **æ‰«æç°æœ‰ç¼–å·**ï¼š
   ```bash
   ls docs/requirements/ | grep -E '^[0-9]{3}-' | sort -r | head -1
   ```

2. **æå–æœ€å¤§ç¼–å·**ï¼š
   ```bash
   echo "008-xxx.md" | cut -d'-' -f1  # è¾“å‡º: 008
   ```

3. **è®¡ç®—ä¸‹ä¸€ä¸ªç¼–å·**ï¼š
   ```bash
   next_num=$((10#008 + 1))
   printf "%03d" $next_num  # è¾“å‡º: 009
   ```

4. **åˆ›å»ºé…å¯¹æ–‡æ¡£**ï¼š
   - æ–‡ä»¶åï¼š`009-new-feature.md` å’Œ `009-new-feature-technical-design.md`
   - æ ‡é¢˜ï¼š`# REQ-009: æ–°åŠŸèƒ½` å’Œ `# DESIGN-009: æ–°åŠŸèƒ½ - æŠ€æœ¯è®¾è®¡`

### ç¼–å·è§„åˆ™

- âœ… ç¼–å·å¿…é¡»è¿ç»­é€’å¢ï¼ˆ001, 002, 003...ï¼‰
- âœ… éœ€æ±‚æ–‡æ¡£å’ŒæŠ€æœ¯è®¾è®¡æ–‡æ¡£å¿…é¡»ä½¿ç”¨ç›¸åŒç¼–å·
- âœ… æ–‡ä»¶åå’Œæ–‡æ¡£æ ‡é¢˜ä¸­çš„ç¼–å·å¿…é¡»ä¸€è‡´
- âœ… ç¼–å·ä¸€æ—¦åˆ†é…ï¼Œä¸åº”æ›´æ”¹ï¼ˆä¿æŒå†å²ä¸€è‡´æ€§ï¼‰
- âŒ ç¦æ­¢è·³å·æˆ–é‡å¤ç¼–å·
- âŒ ç¦æ­¢æ‰‹åŠ¨æŒ‡å®šç¼–å·ï¼ˆç”± AI è‡ªåŠ¨åˆ†é…ï¼‰

### åˆå§‹åŒ–é¡¹ç›®

æ‰§è¡Œ `init-doc-driven-dev` æ—¶è‡ªåŠ¨åˆ›å»ºï¼š
- æ–‡ä»¶ï¼š`docs/requirements/001-project-initial-requirements.md`
- æ ‡é¢˜ï¼š`# REQ-001: é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚`
- æ–‡ä»¶ï¼š`docs/design/001-project-initial-technical-design.md`
- æ ‡é¢˜ï¼š`# DESIGN-001: é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚ - æŠ€æœ¯è®¾è®¡`
```

### 3.3 æ¨¡æ¿æ–‡ä»¶æ›´æ–°

#### 3.3.1 requirements-template.md è®¾è®¡

**å®Œæ•´æ¨¡æ¿å†…å®¹**ï¼š

```markdown
<!--
ğŸ“‹ æ–‡æ¡£ç¼–å·è¯´æ˜
================
æ­¤æ¨¡æ¿ç”¨äºåˆ›å»ºéœ€æ±‚æ–‡æ¡£ï¼ŒAI ä¼šè‡ªåŠ¨å¤„ç†ç¼–å·åˆ†é…ã€‚

ç¼–å·åˆ†é…æµç¨‹ï¼š
1. AI æ‰«æ docs/requirements/ ç›®å½•
2. æå–æœ€å¤§ç¼–å·ï¼ˆå¦‚ 008ï¼‰
3. è‡ªåŠ¨åˆ†é…ä¸‹ä¸€ä¸ªç¼–å·ï¼ˆå¦‚ 009ï¼‰
4. åˆ›å»ºæ–‡ä»¶ï¼š009-feature-name.md
5. åˆ›å»ºé…å¯¹çš„æŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼š009-feature-name-technical-design.md

å ä½ç¬¦è¯´æ˜ï¼š
- {{DOC_NUMBER}}ï¼šæ–‡æ¡£ç¼–å·ï¼ˆå¦‚ "009"ï¼‰
- {{FEATURE_NAME}}ï¼šåŠŸèƒ½åç§° kebab-caseï¼ˆå¦‚ "document-numbering-system"ï¼‰
- {{FEATURE_NAME_TITLE}}ï¼šåŠŸèƒ½æ ‡é¢˜ï¼ˆå¦‚ "æ–‡æ¡£ç¼–å·ç³»ç»Ÿ"ï¼‰
- {{DATE}}ï¼šå½“å‰æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰
- {{AUTHOR}}ï¼šä½œè€…ä¿¡æ¯ï¼ˆä» git config è·å–ï¼‰

ç¤ºä¾‹ï¼š
- æ–‡ä»¶åï¼šdocs/requirements/009-document-numbering-system.md
- æ ‡é¢˜ï¼š# REQ-009: æ–‡æ¡£ç¼–å·ç³»ç»Ÿ
- é…å¯¹æ–‡æ¡£ï¼šdocs/design/009-document-numbering-system-technical-design.md
-->

---
type: "requirement"
document_number: "{{DOC_NUMBER}}"
version: "1.0.0"
lastUpdated: "{{DATE}}"
author: "{{AUTHOR}}"
status: "draft"
paired_design_doc: "docs/design/{{DOC_NUMBER}}-{{FEATURE_NAME}}-technical-design.md"
---

# REQ-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}}

## 1. éœ€æ±‚æ¦‚è¿°

### 1.1 éœ€æ±‚èƒŒæ™¯
<!-- æè¿°é¡¹ç›®çš„èƒŒæ™¯å’ŒåŠ¨æœº -->

### 1.2 ç›®æ ‡ç”¨æˆ·
<!-- æè¿°ç›®æ ‡ç”¨æˆ·ç¾¤ä½“ -->

### 1.3 æ ¸å¿ƒä»·å€¼
<!-- æè¿°é¡¹ç›®è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜å’Œä»·å€¼ -->

## 2. åŠŸèƒ½éœ€æ±‚

### 2.1 æ ¸å¿ƒåŠŸèƒ½
<!-- åˆ—å‡ºä¸»è¦åŠŸèƒ½éœ€æ±‚ -->

### 2.2 è¾…åŠ©åŠŸèƒ½
<!-- åˆ—å‡ºè¾…åŠ©åŠŸèƒ½éœ€æ±‚ -->

## 3. éåŠŸèƒ½éœ€æ±‚

### 3.1 æ€§èƒ½è¦æ±‚
<!-- æ€§èƒ½ç›¸å…³éœ€æ±‚ -->

### 3.2 å¯ç”¨æ€§è¦æ±‚
<!-- å¯ç”¨æ€§ç›¸å…³éœ€æ±‚ -->

### 3.3 å…¼å®¹æ€§è¦æ±‚
<!-- å…¼å®¹æ€§ç›¸å…³éœ€æ±‚ -->

## 4. çº¦æŸæ¡ä»¶

### 4.1 æŠ€æœ¯çº¦æŸ
<!-- æŠ€æœ¯ç›¸å…³çº¦æŸ -->

### 4.2 ä¸šåŠ¡çº¦æŸ
<!-- ä¸šåŠ¡ç›¸å…³çº¦æŸ -->

## 5. éªŒæ”¶æ ‡å‡†

### 5.1 åŠŸèƒ½éªŒæ”¶
<!-- åŠŸèƒ½éªŒæ”¶æ ‡å‡† -->

### 5.2 è´¨é‡éªŒæ”¶
<!-- è´¨é‡éªŒæ”¶æ ‡å‡† -->

## 6. ç”¨æˆ·æ•…äº‹
<!-- å¯é€‰ï¼šæ·»åŠ ç”¨æˆ·æ•…äº‹ -->

## 7. ç›¸å…³æ–‡æ¡£

- `docs/design/{{DOC_NUMBER}}-{{FEATURE_NAME}}-technical-design.md` - é…å¯¹çš„æŠ€æœ¯è®¾è®¡æ–‡æ¡£

## 8. å˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|------|------|------|----------|
| 1.0.0 | {{DATE}} | {{AUTHOR}} | åˆå§‹ç‰ˆæœ¬ |

---

*æ­¤æ–‡æ¡£å°†ä½œä¸ºé¡¹ç›®å¼€å‘çš„æŒ‡å¯¼æ€§æ–‡æ¡£ï¼Œæ‰€æœ‰å®ç°éƒ½åº”åŸºäºæ­¤éœ€æ±‚è¿›è¡Œã€‚*
```

**å…³é”®è®¾è®¡ç‚¹**ï¼š
1. âœ… æ–‡ä»¶ååŒ…å«ç¼–å·ï¼š`009-feature-name.md`
2. âœ… æ ‡é¢˜åŒ…å«ç¼–å·ï¼š`# REQ-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}}`
3. âœ… Frontmatter åŒ…å« `document_number` å­—æ®µ
4. âœ… åŒ…å«è¯¦ç»†çš„ç¼–å·è¯´æ˜æ³¨é‡Š
5. âœ… æ˜ç¡®é…å¯¹å…³ç³»

#### 3.3.2 technical-design-template.md è®¾è®¡

**å®Œæ•´æ¨¡æ¿å†…å®¹**ï¼š

```markdown
<!--
ğŸ”§ æŠ€æœ¯è®¾è®¡æ–‡æ¡£ç¼–å·è¯´æ˜
========================
æ­¤æ¨¡æ¿ç”¨äºåˆ›å»ºæŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼Œå¿…é¡»ä¸éœ€æ±‚æ–‡æ¡£ä½¿ç”¨ç›¸åŒç¼–å·ã€‚

ç¼–å·é…å¯¹è§„åˆ™ï¼š
- éœ€æ±‚æ–‡æ¡£æ–‡ä»¶åï¼šNNN-feature-name.md
- æŠ€æœ¯è®¾è®¡æ–‡ä»¶åï¼šNNN-feature-name-technical-design.md
- éœ€æ±‚æ–‡æ¡£æ ‡é¢˜ï¼š# REQ-NNN: åŠŸèƒ½åç§°
- æŠ€æœ¯è®¾è®¡æ ‡é¢˜ï¼š# DESIGN-NNN: åŠŸèƒ½åç§° - æŠ€æœ¯è®¾è®¡
- ç¼–å· NNN å¿…é¡»å®Œå…¨ä¸€è‡´

AI è‡ªåŠ¨å¤„ç†ï¼š
1. ä¸éœ€æ±‚æ–‡æ¡£åŒæ—¶åˆ›å»º
2. è‡ªåŠ¨ä½¿ç”¨ç›¸åŒçš„ {{DOC_NUMBER}}
3. ç¡®ä¿æ–‡ä»¶åå’Œæ ‡é¢˜ä¸­çš„ç¼–å·ä¸€è‡´

å ä½ç¬¦è¯´æ˜ï¼š
- {{DOC_NUMBER}}ï¼šæ–‡æ¡£ç¼–å·ï¼ˆä¸éœ€æ±‚æ–‡æ¡£ç›¸åŒï¼Œå¦‚ "009"ï¼‰
- {{FEATURE_NAME}}ï¼šåŠŸèƒ½åç§° kebab-caseï¼ˆä¸éœ€æ±‚æ–‡æ¡£ç›¸åŒï¼‰
- {{FEATURE_NAME_TITLE}}ï¼šåŠŸèƒ½æ ‡é¢˜ï¼ˆä¸éœ€æ±‚æ–‡æ¡£ç›¸åŒï¼‰
- {{DATE}}ï¼šå½“å‰æ—¥æœŸ
- {{AUTHOR}}ï¼šä½œè€…ä¿¡æ¯

ç¤ºä¾‹ï¼š
- æ–‡ä»¶åï¼šdocs/design/009-document-numbering-system-technical-design.md
- æ ‡é¢˜ï¼š# DESIGN-009: æ–‡æ¡£ç¼–å·ç³»ç»Ÿ - æŠ€æœ¯è®¾è®¡
- é…å¯¹æ–‡æ¡£ï¼šdocs/requirements/009-document-numbering-system.md
-->

---
type: "design"
document_number: "{{DOC_NUMBER}}"
version: "1.0.0"
lastUpdated: "{{DATE}}"
author: "{{AUTHOR}}"
status: "draft"
paired_requirement_doc: "docs/requirements/{{DOC_NUMBER}}-{{FEATURE_NAME}}.md"
---

# DESIGN-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}} - æŠ€æœ¯è®¾è®¡

## 1. æŠ€æœ¯æ¶æ„æ¦‚è¿°

### 1.1 æ•´ä½“è®¾è®¡æ€è·¯
<!-- æè¿°æ•´ä½“çš„æŠ€æœ¯è®¾è®¡æ€è·¯å’Œç†å¿µ -->

### 1.2 æ¶æ„è®¾è®¡
<!-- æè¿°ç³»ç»Ÿæ¶æ„è®¾è®¡ -->

## 2. æŠ€æœ¯æ ˆé€‰æ‹©

### 2.1 å‰ç«¯æŠ€æœ¯æ ˆï¼ˆå¦‚é€‚ç”¨ï¼‰
<!-- å‰ç«¯æŠ€æœ¯é€‰æ‹©å’Œç†ç”± -->

### 2.2 åç«¯æŠ€æœ¯æ ˆï¼ˆå¦‚é€‚ç”¨ï¼‰
<!-- åç«¯æŠ€æœ¯é€‰æ‹©å’Œç†ç”± -->

### 2.3 æ•°æ®åº“è®¾è®¡ï¼ˆå¦‚é€‚ç”¨ï¼‰
<!-- æ•°æ®åº“æŠ€æœ¯é€‰æ‹©å’Œè®¾è®¡ -->

## 3. è¯¦ç»†è®¾è®¡

### 3.1 æ¨¡å—è®¾è®¡
<!-- å„ä¸ªæ¨¡å—çš„è¯¦ç»†è®¾è®¡ -->

### 3.2 æ¥å£è®¾è®¡ï¼ˆå¦‚é€‚ç”¨ï¼‰
<!-- APIæ¥å£è®¾è®¡ -->

### 3.3 æ•°æ®æµè®¾è®¡
<!-- æ•°æ®æµå‘å’Œå¤„ç†é€»è¾‘ -->

## 4. å…³é”®æŠ€æœ¯å®ç°

### 4.1 æ ¸å¿ƒç®—æ³•
<!-- æ ¸å¿ƒç®—æ³•å’Œå®ç°æ€è·¯ -->

### 4.2 æ€§èƒ½ä¼˜åŒ–
<!-- æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ -->

### 4.3 å®‰å…¨è€ƒè™‘
<!-- å®‰å…¨ç›¸å…³çš„æŠ€æœ¯å®ç° -->

## 5. éƒ¨ç½²å’Œè¿ç»´

### 5.1 éƒ¨ç½²æ¶æ„
<!-- éƒ¨ç½²ç›¸å…³è®¾è®¡ -->

### 5.2 ç›‘æ§å’Œæ—¥å¿—
<!-- ç›‘æ§å’Œæ—¥å¿—ç­–ç•¥ -->

## 6. é£é™©è¯„ä¼°

### 6.1 æŠ€æœ¯é£é™©
<!-- æŠ€æœ¯å®ç°é£é™© -->

### 6.2 ç¼“è§£æªæ–½
<!-- é£é™©ç¼“è§£æªæ–½ -->

## 7. æµ‹è¯•ç­–ç•¥
<!-- æµ‹è¯•æ–¹æ³•å’Œç­–ç•¥ -->

## 8. å®æ–½è®¡åˆ’
<!-- å®æ–½æ­¥éª¤å’Œä¼˜å…ˆçº§ -->

## 9. ç›¸å…³æ–‡æ¡£

- `docs/requirements/{{DOC_NUMBER}}-{{FEATURE_NAME}}.md` - é…å¯¹çš„éœ€æ±‚æ–‡æ¡£

## 10. å˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|------|------|------|----------|
| 1.0.0 | {{DATE}} | {{AUTHOR}} | åˆå§‹ç‰ˆæœ¬ |

---

*æ­¤æŠ€æœ¯æ–¹æ¡ˆå°†æŒ‡å¯¼å…·ä½“çš„å¼€å‘å®ç°ï¼Œç¡®ä¿æŠ€æœ¯é€‰æ‹©çš„åˆç†æ€§å’Œå¯è¡Œæ€§ã€‚*
```

**å…³é”®è®¾è®¡ç‚¹**ï¼š
1. âœ… æ–‡ä»¶ååŒ…å«ç¼–å·ï¼š`009-feature-name-technical-design.md`
2. âœ… æ ‡é¢˜åŒ…å«ç¼–å·ï¼š`# DESIGN-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}} - æŠ€æœ¯è®¾è®¡`
3. âœ… Frontmatter åŒ…å« `document_number` å­—æ®µ
4. âœ… å¼ºè°ƒä¸éœ€æ±‚æ–‡æ¡£çš„ç¼–å·ä¸€è‡´æ€§
5. âœ… åŒ…å«é…å¯¹æ–‡æ¡£é“¾æ¥

#### 3.3.3 å ä½ç¬¦åˆ—è¡¨

| å ä½ç¬¦ | è¯´æ˜ | ç¤ºä¾‹å€¼ | ä½¿ç”¨ä½ç½® |
|--------|------|--------|---------|
| `{{DOC_NUMBER}}` | ä¸‰ä½æ•°ç¼–å· | `"009"` | æ–‡ä»¶åã€æ ‡é¢˜ã€frontmatter |
| `{{FEATURE_NAME}}` | åŠŸèƒ½åç§°ï¼ˆkebab-caseï¼‰ | `"document-numbering-system"` | æ–‡ä»¶åã€é“¾æ¥ |
| `{{FEATURE_NAME_TITLE}}` | åŠŸèƒ½æ ‡é¢˜ï¼ˆä¸­æ–‡ï¼‰ | `"æ–‡æ¡£ç¼–å·ç³»ç»Ÿ"` | æ ‡é¢˜ |
| `{{DATE}}` | å½“å‰æ—¥æœŸ | `"2026-01-31"` | frontmatter |
| `{{AUTHOR}}` | ä½œè€…ä¿¡æ¯ | `"AI"` æˆ– git config user.name | frontmatter |

**ç¼–å·åœ¨æ–‡æ¡£ä¸­çš„ä½¿ç”¨**ï¼š

1. **æ–‡ä»¶å**ï¼š`{{DOC_NUMBER}}-{{FEATURE_NAME}}.md` â†’ `009-document-numbering-system.md`
2. **æ ‡é¢˜**ï¼š`# REQ-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}}` â†’ `# REQ-009: æ–‡æ¡£ç¼–å·ç³»ç»Ÿ`
3. **Frontmatter**ï¼š`document_number: "{{DOC_NUMBER}}"` â†’ `document_number: "009"`

### 3.4 init-doc-driven-dev å‘½ä»¤æ›´æ–°

#### 3.4.1 å‘½ä»¤æ–‡æ¡£æ›´æ–°

æ›´æ–° `plugins/ai-doc-driven-dev/commands/init-doc-driven-dev.md`ï¼š

```markdown
## Output

The command creates the following structure with automatic document numbering:

```
project-root/
â”œâ”€â”€ CLAUDE.md                    # Updated with doc-driven workflow and numbering rules
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ requirements/
â”‚   â”‚   â””â”€â”€ 001-project-initial-requirements.md      # Auto-numbered initial doc
â”‚   â”‚       Title: # REQ-001: é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚
â”‚   â”œâ”€â”€ design/
â”‚   â”‚   â””â”€â”€ 001-project-initial-technical-design.md  # Paired with same number
â”‚   â”‚       Title: # DESIGN-001: é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚ - æŠ€æœ¯è®¾è®¡
â”‚   â”œâ”€â”€ standards/
â”‚   â”‚   â”œâ”€â”€ coding-standards.md
â”‚   â”‚   â””â”€â”€ project-conventions.md
â”‚   â””â”€â”€ analysis/
â”‚       â””â”€â”€ project-analysis.md
â””â”€â”€ [existing project files]
```

**Document Numbering System**:
- **File names**: Initial documents start with `001-project-initial-requirements.md`
- **Document titles**: Include number prefix (e.g., `# REQ-001: é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚`)
- **Auto-assignment**: AI automatically assigns next available number for new documents
- **Paired documents**: Requirements and technical design use matching numbers
  - File: `009-feature.md` â†” `009-feature-technical-design.md`
  - Title: `# REQ-009: åŠŸèƒ½` â†” `# DESIGN-009: åŠŸèƒ½ - æŠ€æœ¯è®¾è®¡`
- **Embedded rules**: Numbering rules and automation workflow in generated CLAUDE.md
- **Template placeholders**: `{{DOC_NUMBER}}` for automatic number injection in both filename and title
```

#### 3.4.2 åˆå§‹åŒ–é€»è¾‘

AI åœ¨æ‰§è¡Œ `init-doc-driven-dev` æ—¶çš„é€»è¾‘ï¼š

```
1. åˆ›å»º docs/ ç›®å½•ç»“æ„ï¼š
   - docs/requirements/
   - docs/design/
   - docs/standards/
   - docs/analysis/

2. ç”Ÿæˆ CLAUDE.mdï¼ˆåŒ…å«å®Œæ•´çš„ç¼–å·è§„èŒƒç« èŠ‚ï¼‰

3. åˆ›å»ºåˆå§‹æ–‡æ¡£ï¼ˆä½¿ç”¨æ¨¡æ¿å¹¶æ›¿æ¢å ä½ç¬¦ï¼‰ï¼š
   æ–‡ä»¶ï¼šdocs/requirements/001-project-initial-requirements.md
   æ ‡é¢˜ï¼š# REQ-001: é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚

   æ–‡ä»¶ï¼šdocs/design/001-project-initial-technical-design.md
   æ ‡é¢˜ï¼š# DESIGN-001: é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚ - æŠ€æœ¯è®¾è®¡

4. å ä½ç¬¦æ›¿æ¢ï¼š
   - {{DOC_NUMBER}} â†’ "001"ï¼ˆæ–‡ä»¶åå’Œæ ‡é¢˜éƒ½è¦æ›¿æ¢ï¼‰
   - {{FEATURE_NAME}} â†’ "project-initial"
   - {{FEATURE_NAME_TITLE}} â†’ "é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚"
   - {{DATE}} â†’ å½“å‰æ—¥æœŸï¼ˆå¦‚ "2026-01-31"ï¼‰
   - {{AUTHOR}} â†’ ä» git config user.name è·å–ï¼Œæˆ–é»˜è®¤ "AI"

5. å¤åˆ¶æ¨¡æ¿æ–‡ä»¶åˆ° docs/standards/ï¼š
   - requirements-template.mdï¼ˆåŒ…å«ç¼–å·è¯´æ˜ï¼‰
   - technical-design-template.mdï¼ˆåŒ…å«ç¼–å·è¯´æ˜ï¼‰
```

### 3.5 Skills é›†æˆ

#### 3.5.1 doc-generator æŠ€èƒ½æ›´æ–°

**æŠ€èƒ½æè¿°æ›´æ–°**ï¼ˆæ·»åŠ ç¼–å·åˆ†é…æŒ‡å¯¼ï¼‰ï¼š

åœ¨ `SKILL.md` çš„ "How It Works" ç« èŠ‚æ·»åŠ ï¼š

```markdown
## ç¼–å·åˆ†é…æµç¨‹

åœ¨ç”Ÿæˆæ–°æ–‡æ¡£å‰ï¼Œdoc-generator æŠ€èƒ½å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

### æ­¥éª¤ 1ï¼šæ‰«æç°æœ‰ç¼–å·
```bash
ls docs/requirements/ | grep -E '^[0-9]{3}-' | sort -r | head -1
```

### æ­¥éª¤ 2ï¼šæå–æœ€å¤§ç¼–å·
```bash
# å‡è®¾æ‰«æç»“æœä¸º "008-xxx.md"
echo "008-xxx.md" | cut -d'-' -f1  # è¾“å‡º: 008
```

### æ­¥éª¤ 3ï¼šè®¡ç®—ä¸‹ä¸€ä¸ªç¼–å·
```bash
next_num=$((10#008 + 1))
printf "%03d" $next_num  # è¾“å‡º: 009
```

### æ­¥éª¤ 4ï¼šåˆ›å»ºé…å¯¹æ–‡æ¡£
- éœ€æ±‚æ–‡æ¡£æ–‡ä»¶åï¼š`docs/requirements/009-feature-name.md`
- éœ€æ±‚æ–‡æ¡£æ ‡é¢˜ï¼š`# REQ-009: åŠŸèƒ½åç§°`
- æŠ€æœ¯è®¾è®¡æ–‡ä»¶åï¼š`docs/design/009-feature-name-technical-design.md`
- æŠ€æœ¯è®¾è®¡æ ‡é¢˜ï¼š`# DESIGN-009: åŠŸèƒ½åç§° - æŠ€æœ¯è®¾è®¡`

### æ­¥éª¤ 5ï¼šæ›¿æ¢æ¨¡æ¿å ä½ç¬¦
è¯»å–æ¨¡æ¿æ–‡ä»¶å¹¶æ›¿æ¢æ‰€æœ‰å ä½ç¬¦ï¼š
- {{DOC_NUMBER}} â†’ "009"ï¼ˆæ–‡ä»¶åå’Œæ ‡é¢˜éƒ½è¦æ›¿æ¢ï¼‰
- {{FEATURE_NAME}} â†’ "feature-name"
- {{FEATURE_NAME_TITLE}} â†’ "åŠŸèƒ½åç§°"
- {{DATE}} â†’ å½“å‰æ—¥æœŸ
- {{AUTHOR}} â†’ ä½œè€…ä¿¡æ¯

## å ä½ç¬¦æ›¿æ¢è§„åˆ™

| å ä½ç¬¦ | è·å–æ–¹å¼ | æ›¿æ¢ä½ç½® |
|--------|----------|---------|
| {{DOC_NUMBER}} | ä»ç¼–å·åˆ†é…æµç¨‹è·å– | æ–‡ä»¶åã€æ ‡é¢˜ã€frontmatter |
| {{FEATURE_NAME}} | ä»ç”¨æˆ·è¾“å…¥æˆ–æ–‡ä»¶åæå– | æ–‡ä»¶åã€é“¾æ¥ |
| {{FEATURE_NAME_TITLE}} | ä»ç”¨æˆ·è¾“å…¥æˆ–è‡ªåŠ¨ç”Ÿæˆ | æ ‡é¢˜ |
| {{DATE}} | å½“å‰æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰ | frontmatter |
| {{AUTHOR}} | git config user.name æˆ– "AI" | frontmatter |

## ç¼–å·ä¸€è‡´æ€§æ£€æŸ¥

åˆ›å»ºæ–‡æ¡£åï¼ŒéªŒè¯ï¼š
1. âœ… æ–‡ä»¶åä¸­çš„ç¼–å·ä¸æ ‡é¢˜ä¸­çš„ç¼–å·ä¸€è‡´
2. âœ… frontmatter ä¸­çš„ document_number ä¸æ–‡ä»¶åä¸€è‡´
3. âœ… éœ€æ±‚æ–‡æ¡£å’ŒæŠ€æœ¯è®¾è®¡æ–‡æ¡£ä½¿ç”¨ç›¸åŒç¼–å·
```

#### 3.5.2 claude-md-enforcer æŠ€èƒ½æ›´æ–°

**SKILL.md æ›´æ–°è¦ç‚¹**ï¼š

åœ¨ "How It Works" ç« èŠ‚æ·»åŠ ï¼š

```markdown
## ç¼–å·è§„èŒƒç”Ÿæˆ

åœ¨ç”Ÿæˆæˆ–æ›´æ–° CLAUDE.md æ—¶ï¼Œå¿…é¡»åŒ…å«å®Œæ•´çš„"æ–‡æ¡£ç¼–å·è§„èŒƒ"ç« èŠ‚ï¼Œå†…å®¹åŒ…æ‹¬ï¼š

1. **ç¼–å·æ ¼å¼è¯´æ˜**ï¼š
   - æ–‡ä»¶åæ ¼å¼ï¼ˆNNN-feature-name.mdï¼‰
   - æ ‡é¢˜æ ¼å¼ï¼ˆ# REQ-NNN: åŠŸèƒ½åç§°ï¼‰
   - ä¸‰ä½æ•°ç¼–å·è§„åˆ™

2. **ç¼–å·é…å¯¹è§„åˆ™**ï¼š
   - éœ€æ±‚æ–‡æ¡£å’ŒæŠ€æœ¯è®¾è®¡æ–‡æ¡£çš„é…å¯¹å…³ç³»
   - æ–‡ä»¶åå’Œæ ‡é¢˜çš„å¯¹åº”å…³ç³»

3. **AI è‡ªåŠ¨åŒ–æµç¨‹**ï¼š
   - å®Œæ•´çš„ç¼–å·æ‰«æå‘½ä»¤
   - ç¼–å·è®¡ç®—æ–¹æ³•
   - å ä½ç¬¦æ›¿æ¢è¯´æ˜

4. **ç¼–å·è§„åˆ™æ¸…å•**ï¼š
   - âœ… å…è®¸çš„æ“ä½œ
   - âŒ ç¦æ­¢çš„æ“ä½œ

æ­¤ç« èŠ‚åº”ä½äº"å¼€å‘æµç¨‹è¦æ±‚"ä¹‹åï¼Œç¡®ä¿ AI åœ¨åˆ›å»ºä»»ä½•æ–‡æ¡£å‰éƒ½èƒ½è¯»å–å¹¶éµå¾ªç¼–å·è§„èŒƒã€‚
```

### 3.6 å·¥å…·é“¾ä¸æ ‡å‡†åŒ–è®¾è®¡ï¼ˆåˆå¹¶ REQ-008ï¼‰

#### 3.6.1 æ¨¡æ¿ä¸è§„èŒƒ

- **Command æ¨¡æ¿**ï¼šæ–°å¢ `docs/standards/command-documentation-template.md`ï¼ˆä¸­/è‹±åŒè¯­ï¼‰
- **Skill æ¨¡æ¿**ï¼šå¢å¼ºç°æœ‰æ¨¡æ¿å¹¶è¡¥å……ä¸­/è‹±æ–‡ç‰ˆæœ¬
- **Frontmatter è§„èŒƒ**ï¼šé›†ä¸­ç®¡ç†å¿…å¡«å­—æ®µã€ä¾èµ–ã€å…¼å®¹æ€§ä¸ç‰ˆæœ¬
- **é”™è¯¯ä»£ç è§„èŒƒ**ï¼šç»Ÿä¸€é”™è¯¯ç ã€æç¤ºæ ¼å¼ä¸å¤šè¯­è¨€è¾“å‡º

#### 3.6.2 è„šæ‰‹æ¶ä¸æ ¡éªŒ

**è„šæ‰‹æ¶è„šæœ¬**ï¼š
- `scripts/scaffold-command.sh`
- `scripts/scaffold-skill.sh`
- äº¤äº’å¼è¾“å…¥å¿…å¡«å­—æ®µï¼Œç”ŸæˆåŒè¯­æ¨¡æ¿ä¸ç¤ºä¾‹

**æ ¡éªŒè„šæœ¬**ï¼š
- `scripts/validate-commands.sh`
- `scripts/validate-skills.sh`
- æ ¡éªŒ frontmatterã€ç« èŠ‚ç»“æ„ã€å‘½åè§„åˆ™ã€ä¾èµ–å¼•ç”¨

#### 3.6.3 æµ‹è¯•ä¸è¿ç§»

**æµ‹è¯•æ¡†æ¶**ï¼š
- `tests/commands/`, `tests/skills/`, `tests/lib/`
- ç»Ÿä¸€æµ‹è¯•å·¥å…·ä¸ fixturesï¼Œæ”¯æŒè¦†ç›–ç‡æŠ¥å‘Š

**è¿ç§»å·¥å…·**ï¼š
- `scripts/migrate-to-new-standard.sh`
- è‡ªåŠ¨è¡¥å……ç¼ºå¤±å­—æ®µã€å¯¹é½æ¨¡æ¿ç»“æ„å¹¶ç”Ÿæˆè¿ç§»æŠ¥å‘Š

#### 3.6.4 ç¤ºä¾‹åº“ä¸æ–‡æ¡£ç”Ÿæˆ

- `examples/commands/`ï¼ˆminimal/standard/advancedï¼‰
- `examples/skills/`ï¼ˆminimal/standard/advancedï¼‰
- `scripts/generate-docs.sh` ç”Ÿæˆç´¢å¼•ã€README ä¸ä¾èµ–å…³ç³»å›¾

## 4. å…³é”®æŠ€æœ¯å®ç°

### 4.1 ç¼–å·å†²çªæ£€æµ‹

```bash
# æ£€æµ‹é‡å¤ç¼–å·
duplicates=$(ls docs/requirements/ | grep -E '^[0-9]{3}-' | cut -d'-' -f1 | sort | uniq -d)
if [ -n "$duplicates" ]; then
  echo "âš ï¸  å‘ç°é‡å¤ç¼–å·: $duplicates"
fi
```

### 4.2 ç¼–å·åºåˆ—å®Œæ•´æ€§æ£€æŸ¥

```bash
# æ£€æµ‹è·³å·
numbers=$(ls docs/requirements/ | grep -E '^[0-9]{3}-' | cut -d'-' -f1 | sort -n)
expected=1
for num in $numbers; do
  if [ $((10#$num)) -ne $expected ]; then
    echo "âš ï¸  ç¼ºå°‘ç¼–å·: $(printf '%03d' $expected)"
  fi
  expected=$((10#$num + 1))
done
```

### 4.3 é…å¯¹å…³ç³»éªŒè¯

```bash
# éªŒè¯æ¯ä¸ªéœ€æ±‚æ–‡æ¡£éƒ½æœ‰å¯¹åº”çš„æŠ€æœ¯è®¾è®¡æ–‡æ¡£
for req in docs/requirements/[0-9][0-9][0-9]-*.md; do
  num=$(basename "$req" | cut -d'-' -f1)
  name=$(basename "$req" | sed "s/^$num-//" | sed 's/\.md$//')
  design="docs/design/${num}-${name}-technical-design.md"
  if [ ! -f "$design" ]; then
    echo "âš ï¸  ç¼ºå°‘æŠ€æœ¯è®¾è®¡æ–‡æ¡£: $design"
  fi
done
```

### 4.4 æ ‡é¢˜ç¼–å·ä¸€è‡´æ€§æ£€æŸ¥

```bash
# æ£€æŸ¥æ–‡ä»¶åç¼–å·ä¸æ ‡é¢˜ç¼–å·æ˜¯å¦ä¸€è‡´
for doc in docs/requirements/[0-9][0-9][0-9]-*.md; do
  file_num=$(basename "$doc" | cut -d'-' -f1)
  title_num=$(grep -E '^# REQ-[0-9]{3}:' "$doc" | sed 's/# REQ-//' | cut -d':' -f1)
  if [ "$file_num" != "$title_num" ]; then
    echo "âš ï¸  ç¼–å·ä¸ä¸€è‡´: æ–‡ä»¶ $file_num vs æ ‡é¢˜ $title_num in $doc"
  fi
done
```

### 4.5 AI è‡ªåŠ¨åŒ–å®ç°å…³é”®ç‚¹

**CLAUDE.md ä¸­çš„ AI æŒ‡ä»¤**ï¼ˆå®Œæ•´ç‰ˆï¼‰ï¼š

```markdown
## AI æ–‡æ¡£åˆ›å»ºæµç¨‹ï¼ˆè‡ªåŠ¨æ‰§è¡Œï¼‰

å½“åˆ›å»ºæ–°çš„éœ€æ±‚æ–‡æ¡£æˆ–æŠ€æœ¯è®¾è®¡æ–‡æ¡£æ—¶ï¼ŒAI å¿…é¡»éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

### æ­¥éª¤ 1ï¼šæ‰«æç°æœ‰ç¼–å·
```bash
ls docs/requirements/ | grep -E '^[0-9]{3}-' | sort -r | head -1
```

### æ­¥éª¤ 2ï¼šè®¡ç®—ä¸‹ä¸€ä¸ªç¼–å·
```bash
# å‡è®¾æ­¥éª¤ 1 è¾“å‡ºä¸º "008-xxx.md"
last_num=$(echo "008-xxx.md" | cut -d'-' -f1)
next_num=$((10#$last_num + 1))
doc_number=$(printf "%03d" $next_num)
# doc_number = "009"
```

### æ­¥éª¤ 3ï¼šå‡†å¤‡æ–‡æ¡£ä¿¡æ¯
- ç¼–å·ï¼š${doc_number}ï¼ˆå¦‚ "009"ï¼‰
- åŠŸèƒ½åç§°ï¼ˆkebab-caseï¼‰ï¼šä»ç”¨æˆ·è¾“å…¥è·å–ï¼ˆå¦‚ "document-numbering-system"ï¼‰
- åŠŸèƒ½æ ‡é¢˜ï¼šä»ç”¨æˆ·è¾“å…¥è·å–ï¼ˆå¦‚ "æ–‡æ¡£ç¼–å·ç³»ç»Ÿ"ï¼‰

### æ­¥éª¤ 4ï¼šåˆ›å»ºé…å¯¹æ–‡æ¡£
**éœ€æ±‚æ–‡æ¡£**ï¼š
- æ–‡ä»¶åï¼š`docs/requirements/${doc_number}-${feature_name}.md`
- æ ‡é¢˜ï¼š`# REQ-${doc_number}: ${feature_title}`

**æŠ€æœ¯è®¾è®¡æ–‡æ¡£**ï¼š
- æ–‡ä»¶åï¼š`docs/design/${doc_number}-${feature_name}-technical-design.md`
- æ ‡é¢˜ï¼š`# DESIGN-${doc_number}: ${feature_title} - æŠ€æœ¯è®¾è®¡`

### æ­¥éª¤ 5ï¼šæ›¿æ¢æ¨¡æ¿å ä½ç¬¦
è¯»å–æ¨¡æ¿æ–‡ä»¶å¹¶æ›¿æ¢ï¼š
- {{DOC_NUMBER}} â†’ ${doc_number}ï¼ˆåœ¨æ–‡ä»¶åã€æ ‡é¢˜ã€frontmatter ä¸­ï¼‰
- {{FEATURE_NAME}} â†’ ${feature_name}
- {{FEATURE_NAME_TITLE}} â†’ ${feature_title}
- {{DATE}} â†’ å½“å‰æ—¥æœŸ
- {{AUTHOR}}â†’ ä½œè€…ä¿¡æ¯

### æ­¥éª¤ 6ï¼šéªŒè¯ç¼–å·ä¸€è‡´æ€§
åˆ›å»ºæ–‡æ¡£åæ£€æŸ¥ï¼š
1. æ–‡ä»¶åä¸­çš„ç¼–å· = æ ‡é¢˜ä¸­çš„ç¼–å·
2. frontmatter ä¸­çš„ document_number = æ–‡ä»¶åç¼–å·
3. éœ€æ±‚æ–‡æ¡£ç¼–å· = æŠ€æœ¯è®¾è®¡æ–‡æ¡£ç¼–å·

### é”™è¯¯å¤„ç†
- å¦‚æœ docs/requirements/ ä¸å­˜åœ¨æˆ–ä¸ºç©ºï¼Œä½¿ç”¨ "001" ä½œä¸ºåˆå§‹ç¼–å·
- å¦‚æœæ‰«æå¤±è´¥ï¼Œæç¤ºç”¨æˆ·æ£€æŸ¥ç›®å½•ç»“æ„
- å¦‚æœç¼–å·ä¸ä¸€è‡´ï¼Œç«‹å³ä¿®æ­£
```

## 5. éƒ¨ç½²å’Œè¿ç»´

### 5.1 éƒ¨ç½²æ¶æ„

**æ— éœ€éƒ¨ç½²**ï¼š
- ç¼–å·ç³»ç»Ÿå®Œå…¨åŸºäºæ–‡ä»¶ç³»ç»Ÿå’Œ AI è‡ªåŠ¨åŒ–
- æ— éœ€æœåŠ¡å™¨ã€æ•°æ®åº“æˆ–åå°è¿›ç¨‹
- é€šè¿‡ CLAUDE.md è§„èŒƒã€æ¨¡æ¿æ–‡ä»¶å’ŒæŠ€èƒ½æè¿°å®ç°

### 5.2 ç»´æŠ¤å’Œç›‘æ§

**ç»´æŠ¤æ–¹å¼**ï¼š
- å®šæœŸæ£€æŸ¥ç¼–å·åºåˆ—å®Œæ•´æ€§ï¼ˆå¯é€‰ï¼‰
- éªŒè¯é…å¯¹å…³ç³»ï¼ˆå¯é€‰ï¼‰
- éªŒè¯æ–‡ä»¶åå’Œæ ‡é¢˜ç¼–å·ä¸€è‡´æ€§ï¼ˆå¯é€‰ï¼‰
- æ›´æ–° CLAUDE.md ä¸­çš„ç¼–å·è§„èŒƒï¼ˆå¦‚æœ‰å˜åŒ–ï¼‰

**ç›‘æ§æŒ‡æ ‡**ï¼š
- ç¼–å·å†²çªæ•°é‡ï¼ˆåº”ä¸º 0ï¼‰
- ç¼ºå¤±é…å¯¹æ–‡æ¡£æ•°é‡ï¼ˆåº”ä¸º 0ï¼‰
- ç¼–å·åºåˆ—è·³å·æ•°é‡ï¼ˆåº”ä¸º 0ï¼‰
- æ–‡ä»¶åä¸æ ‡é¢˜ç¼–å·ä¸ä¸€è‡´æ•°é‡ï¼ˆåº”ä¸º 0ï¼‰

## 6. é£é™©è¯„ä¼°

### 6.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| AI æœªæ­£ç¡®æ‰§è¡Œç¼–å·æ‰«æ | ä¸­ | ä½ | CLAUDE.md ä¸­ä½¿ç”¨æ˜ç¡®æŒ‡ä»¤ï¼›æ¨¡æ¿ä¸­æ·»åŠ è¯¦ç»†æ³¨é‡Š |
| ç¼–å·å†²çª | ä½ | æä½ | è‡ªåŠ¨åŒ–åˆ†é…æœºåˆ¶ï¼›æä¾›å†²çªæ£€æµ‹å‘½ä»¤ |
| æ–‡ä»¶åä¸æ ‡é¢˜ç¼–å·ä¸ä¸€è‡´ | ä¸­ | ä½ | AI éªŒè¯æ­¥éª¤ï¼›æä¾›ä¸€è‡´æ€§æ£€æŸ¥å‘½ä»¤ |
| æ–‡ä»¶ç³»ç»Ÿæ‰«æå¤±è´¥ | ä½ | ä½ | é»˜è®¤ä½¿ç”¨ 001ï¼›æç¤ºç”¨æˆ·æ£€æŸ¥ç›®å½• |
| æ¨¡æ¿å ä½ç¬¦æœªæ­£ç¡®æ›¿æ¢ | ä¸­ | ä½ | æ¨¡æ¿ä¸­æ·»åŠ è¯¦ç»†è¯´æ˜ï¼›AI éªŒè¯æ›¿æ¢ç»“æœ |

### 6.2 ç¼“è§£æªæ–½

1. **æ¸…æ™°çš„ AI æŒ‡ä»¤**ï¼š
   - CLAUDE.md ä¸­ä½¿ç”¨æ˜ç¡®çš„æ­¥éª¤è¯´æ˜
   - åŒ…å«å®Œæ•´çš„å‘½ä»¤ç¤ºä¾‹å’Œè¾“å‡ºç¤ºä¾‹
   - å¼ºè°ƒ"å¿…é¡»"æ‰§è¡Œçš„æ­¥éª¤
   - æ˜ç¡®æ–‡ä»¶åå’Œæ ‡é¢˜éƒ½è¦åŒ…å«ç¼–å·

2. **æ¨¡æ¿æ³¨é‡Š**ï¼š
   - åœ¨æ¨¡æ¿æ–‡ä»¶é¡¶éƒ¨æ·»åŠ è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜
   - åˆ—å‡ºæ‰€æœ‰å ä½ç¬¦åŠå…¶ä½¿ç”¨ä½ç½®
   - æä¾›å®Œæ•´çš„ç¤ºä¾‹ï¼ˆæ–‡ä»¶å + æ ‡é¢˜ï¼‰

3. **ä¸€è‡´æ€§éªŒè¯**ï¼š
   - AI åˆ›å»ºæ–‡æ¡£åè‡ªåŠ¨éªŒè¯ç¼–å·ä¸€è‡´æ€§
   - æä¾›æ‰‹åŠ¨æ£€æŸ¥å‘½ä»¤

4. **å†²çªæ£€æµ‹**ï¼š
   - æä¾›ç¼–å·å†²çªæ£€æµ‹å‘½ä»¤
   - AI åœ¨åˆ†é…ç¼–å·åéªŒè¯å”¯ä¸€æ€§

5. **æ–‡æ¡£åŒ–**ï¼š
   - åœ¨æ’ä»¶ README ä¸­è¯´æ˜ç¼–å·ç³»ç»Ÿ
   - æä¾›æ•…éšœæ’æŸ¥æŒ‡å—

## 7. æµ‹è¯•ç­–ç•¥

### 7.1 å•å…ƒæµ‹è¯•

```bash
# æµ‹è¯•ç¼–å·æå–
test_extract_number() {
  result=$(echo "008-test.md" | cut -d'-' -f1)
  [ "$result" = "008" ] && echo "âœ… PASS" || echo "âŒ FAIL"
}

# æµ‹è¯•ç¼–å·è®¡ç®—
test_next_number() {
  result=$(printf "%03d" $((10#008 + 1)))
  [ "$result" = "009" ] && echo "âœ… PASS" || echo "âŒ FAIL"
}

# æµ‹è¯•æ–‡ä»¶åå ä½ç¬¦æ›¿æ¢
test_filename_placeholder() {
  template="{{DOC_NUMBER}}-{{FEATURE_NAME}}.md"
  result=$(echo "$template" | sed "s/{{DOC_NUMBER}}/009/g" | sed "s/{{FEATURE_NAME}}/test-feature/g")
  expected="009-test-feature.md"
  [ "$result" = "$expected" ] && echo "âœ… PASS" || echo "âŒ FAIL"
}

# æµ‹è¯•æ ‡é¢˜å ä½ç¬¦æ›¿æ¢
test_title_placeholder() {
  template="# REQ-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}}"
  result=$(echo "$template" | sed "s/{{DOC_NUMBER}}/009/g" | sed "s/{{FEATURE_NAME_TITLE}}/æµ‹è¯•åŠŸèƒ½/g")
  expected="# REQ-009: æµ‹è¯•åŠŸèƒ½"
  [ "$result" = "$expected" ] && echo "âœ… PASS" || echo "âŒ FAIL"
}
```

### 7.2 é›†æˆæµ‹è¯•

æµ‹è¯•å®Œæ•´æµç¨‹ï¼š
1. åœ¨ç©ºé¡¹ç›®ä¸­æ‰§è¡Œ `init-doc-driven-dev`
2. éªŒè¯ç”Ÿæˆæ–‡ä»¶ï¼š`001-project-initial-requirements.md`
3. éªŒè¯æ–‡ä»¶æ ‡é¢˜ï¼š`# REQ-001: é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚`
4. éªŒè¯ frontmatterï¼š`document_number: "001"`
5. è¯·æ±‚ AI åˆ›å»ºæ–°éœ€æ±‚æ–‡æ¡£
6. éªŒè¯ AI è‡ªåŠ¨åˆ†é… `002` ç¼–å·
7. éªŒè¯æ–‡ä»¶åï¼š`002-xxx.md`
8. éªŒè¯æ ‡é¢˜ï¼š`# REQ-002: xxx`
9. éªŒè¯é…å¯¹çš„æŠ€æœ¯è®¾è®¡æ–‡æ¡£ä¹Ÿä½¿ç”¨ `002`
10. éªŒè¯æ‰€æœ‰å ä½ç¬¦éƒ½å·²æ­£ç¡®æ›¿æ¢

### 7.3 ä¸€è‡´æ€§æµ‹è¯•

æµ‹è¯•ç¼–å·ä¸€è‡´æ€§ï¼š
1. åˆ›å»ºæ–‡æ¡£åæ£€æŸ¥æ–‡ä»¶åç¼–å·
2. è¯»å–æ–‡æ¡£æ£€æŸ¥æ ‡é¢˜ç¼–å·
3. éªŒè¯ä¸¤è€…ä¸€è‡´
4. æ£€æŸ¥ frontmatter ä¸­çš„ document_number
5. éªŒè¯ä¸‰è€…å®Œå…¨ä¸€è‡´

## 8. å®æ–½è®¡åˆ’

### 8.1 å®æ–½æ­¥éª¤

**Phase 1: æ¨¡æ¿æ–‡ä»¶æ›´æ–°** â­ æœ€é«˜ä¼˜å…ˆçº§
- [ ] æ›´æ–° `requirements-template.md`
  - æ·»åŠ ç¼–å·è¯´æ˜æ³¨é‡Š
  - æ›´æ–°æ ‡é¢˜ä¸º `# REQ-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}}`
  - æ·»åŠ æ‰€æœ‰å ä½ç¬¦
- [ ] æ›´æ–° `technical-design-template.md`
  - æ·»åŠ ç¼–å·è¯´æ˜æ³¨é‡Š
  - æ›´æ–°æ ‡é¢˜ä¸º `# DESIGN-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}} - æŠ€æœ¯è®¾è®¡`
  - æ·»åŠ æ‰€æœ‰å ä½ç¬¦
- [ ] æµ‹è¯•å ä½ç¬¦æ›¿æ¢é€»è¾‘

**Phase 2: å·¥å…·é“¾ä¸è§„èŒƒåŸºç¡€**
- [ ] åˆ›å»º/è¡¥å……æ ‡å‡†åŒ–æ¨¡æ¿ï¼ˆCommand/Skill ä¸­è‹±åŒè¯­ï¼‰
- [ ] ç¼–å†™ frontmatter è§„èŒƒä¸é”™è¯¯ä»£ç è§„èŒƒ
- [ ] æ­å»ºè„šæ‰‹æ¶ä¸æ ¡éªŒè„šæœ¬éª¨æ¶
- [ ] å‡†å¤‡æµ‹è¯•ç›®å½•ä¸ç¤ºä¾‹åº“ç»“æ„

**Phase 3: CLAUDE.md è§„èŒƒæ¨¡æ¿åˆ›å»º**
- [ ] åˆ›å»ºå®Œæ•´çš„ç¼–å·è§„èŒƒç« èŠ‚å†…å®¹
  - åŒ…å«æ–‡ä»¶åå’Œæ ‡é¢˜æ ¼å¼è¯´æ˜
  - åŒ…å«å®Œæ•´çš„ AI è‡ªåŠ¨åŒ–æµç¨‹
  - åŒ…å«éªŒè¯æ­¥éª¤
- [ ] åœ¨ `claude-md-enforcer` æŠ€èƒ½ä¸­é›†æˆç¼–å·è§„èŒƒ
- [ ] æµ‹è¯• CLAUDE.md ç”Ÿæˆ

**Phase 4: init-doc-driven-dev å‘½ä»¤æ›´æ–°**
- [ ] æ›´æ–°å‘½ä»¤æ–‡æ¡£ï¼ˆ`init-doc-driven-dev.md`ï¼‰
  - ä½“ç°æ–‡ä»¶åå’Œæ ‡é¢˜çš„ç¼–å·æ ¼å¼
- [ ] å®ç°åˆå§‹åŒ–é€»è¾‘
  - åˆ›å»º `001-project-initial-requirements.md`
  - æ ‡é¢˜ï¼š`# REQ-001: é¡¹ç›®åˆå§‹åŒ–éœ€æ±‚`
- [ ] å®ç°å ä½ç¬¦æ›¿æ¢é€»è¾‘ï¼ˆæ–‡ä»¶å + æ ‡é¢˜ï¼‰
- [ ] æµ‹è¯•åˆå§‹åŒ–æµç¨‹

**Phase 5: doc-generator æŠ€èƒ½æ›´æ–°**
- [ ] åœ¨ `SKILL.md` ä¸­æ·»åŠ ç¼–å·åˆ†é…æµç¨‹è¯´æ˜
  - å¼ºè°ƒæ–‡ä»¶åå’Œæ ‡é¢˜éƒ½è¦åŒ…å«ç¼–å·
  - æ·»åŠ ä¸€è‡´æ€§éªŒè¯æ­¥éª¤
- [ ] æ›´æ–°æŠ€èƒ½æè¿°ï¼ŒåŒ…å«å ä½ç¬¦æ›¿æ¢æŒ‡å¯¼
- [ ] æµ‹è¯•æ–‡æ¡£ç”Ÿæˆå’Œç¼–å·åˆ†é…

**Phase 6: æµ‹è¯•å’ŒéªŒè¯**
- [ ] åœ¨æµ‹è¯•é¡¹ç›®ä¸­éªŒè¯å®Œæ•´æµç¨‹
- [ ] æµ‹è¯•ç¼–å·å†²çªæ£€æµ‹
- [ ] æµ‹è¯•é…å¯¹å…³ç³»éªŒè¯
- [ ] æµ‹è¯•æ–‡ä»¶åä¸æ ‡é¢˜ç¼–å·ä¸€è‡´æ€§
- [ ] ä¿®å¤å‘ç°çš„é—®é¢˜

**Phase 7: æ–‡æ¡£æ›´æ–°**
- [ ] æ›´æ–°æ’ä»¶ READMEï¼ˆæ·»åŠ ç¼–å·ç³»ç»Ÿè¯´æ˜ï¼‰
- [ ] åˆ›å»ºç¼–å·ç³»ç»Ÿä½¿ç”¨æŒ‡å—
- [ ] æ·»åŠ æ•…éšœæ’æŸ¥æŒ‡å—

### 8.2 å®æ–½ä¼˜å…ˆçº§

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | ç†ç”± | é¢„è®¡å·¥ä½œé‡ |
|------|--------|------|-----------|
| æ¨¡æ¿æ–‡ä»¶æ›´æ–° | ğŸ”´ æœ€é«˜ | æ ¸å¿ƒåŸºç¡€ï¼Œå½±å“æ–‡ä»¶åå’Œæ ‡é¢˜ | 1-2 å°æ—¶ |
| å·¥å…·é“¾ä¸è§„èŒƒåŸºç¡€ | ğŸ”´ æœ€é«˜ | ç»Ÿä¸€ Commands/Skills è´¨é‡åŸºç¡€ | 2-4 å°æ—¶ |
| CLAUDE.md è§„èŒƒåˆ›å»º | ğŸ”´ æœ€é«˜ | AI ä¾èµ–æ­¤è§„èŒƒæ‰§è¡Œç¼–å·åˆ†é… | 1-2 å°æ—¶ |
| init-doc-driven-dev æ›´æ–° | ğŸŸ¡ é«˜ | æ–°é¡¹ç›®åˆå§‹åŒ–åŠŸèƒ½ | 2-3 å°æ—¶ |
| doc-generator æ›´æ–° | ğŸŸ¡ é«˜ | ç°æœ‰é¡¹ç›®æ–‡æ¡£åˆ›å»º | 1-2 å°æ—¶ |
| æµ‹è¯•å’ŒéªŒè¯ | ğŸŸ¢ ä¸­ | ç¡®ä¿åŠŸèƒ½æ­£ç¡®æ€§ | 2-3 å°æ—¶ |
| æ–‡æ¡£æ›´æ–° | ğŸŸ¢ ä¸­ | ç”¨æˆ·æŒ‡å¯¼ | 1 å°æ—¶ |

## 9. æ–‡ä»¶å˜æ›´æ¸…å•

### 9.1 éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | å˜æ›´ç±»å‹ | å˜æ›´å†…å®¹ |
|---------|---------|---------|
| `plugins/ai-doc-driven-dev/knowledge/templates/requirements-template.md` | ä¿®æ”¹ | æ ‡é¢˜æ”¹ä¸º `# REQ-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}}`ï¼›æ·»åŠ ç¼–å·è¯´æ˜ |
| `plugins/ai-doc-driven-dev/knowledge/templates/technical-design-template.md` | ä¿®æ”¹ | æ ‡é¢˜æ”¹ä¸º `# DESIGN-{{DOC_NUMBER}}: {{FEATURE_NAME_TITLE}} - æŠ€æœ¯è®¾è®¡`ï¼›æ·»åŠ ç¼–å·è¯´æ˜ |
| `plugins/ai-doc-driven-dev/commands/init-doc-driven-dev.md` | ä¿®æ”¹ | æ›´æ–°è¾“å‡ºè¯´æ˜ï¼Œä½“ç°æ–‡ä»¶åå’Œæ ‡é¢˜çš„ç¼–å·æ ¼å¼ |
| `plugins/ai-doc-driven-dev/skills/claude-md-enforcer/SKILL.md` | ä¿®æ”¹ | æ·»åŠ ç¼–å·è§„èŒƒç”Ÿæˆé€»è¾‘ï¼ˆåŒ…å«æ–‡ä»¶åå’Œæ ‡é¢˜æ ¼å¼ï¼‰ |
| `plugins/ai-doc-driven-dev/skills/doc-generator/SKILL.md` | ä¿®æ”¹ | æ·»åŠ ç¼–å·åˆ†é…æµç¨‹å’Œä¸€è‡´æ€§éªŒè¯è¯´æ˜ |
| `plugins/ai-doc-driven-dev/README.md` | ä¿®æ”¹ | æ·»åŠ ç¼–å·ç³»ç»Ÿè¯´æ˜ |

### 9.2 æ–°å¢æ–‡ä»¶ï¼ˆå·¥å…·é“¾ä¸æ ‡å‡†åŒ–ï¼‰

- `docs/standards/command-documentation-template.md`
- `docs/standards/command-documentation-template-zh.md`
- `docs/standards/skill-documentation-template-zh.md`
- `docs/standards/frontmatter-specification.md`
- `docs/standards/error-codes.md`
- `scripts/scaffold-command.sh`
- `scripts/scaffold-skill.sh`
- `scripts/validate-commands.sh`
- `scripts/validate-skills.sh`
- `scripts/migrate-to-new-standard.sh`
- `scripts/generate-docs.sh`
- `scripts/lib/validation-lib.sh`
- `scripts/lib/template-lib.sh`
- `scripts/lib/utils.sh`
- `tests/commands/`ï¼ˆå«æ¨¡æ¿ä¸ fixturesï¼‰
- `tests/skills/`ï¼ˆå«æ¨¡æ¿ä¸ fixturesï¼‰
- `tests/lib/`
- `examples/commands/`
- `examples/skills/`

## 10. ç›¸å…³æ–‡æ¡£

- `docs/requirements/009-document-numbering-system.md` - éœ€æ±‚æ–‡æ¡£
- `plugins/ai-doc-driven-dev/commands/init-doc-driven-dev.md` - åˆå§‹åŒ–å‘½ä»¤
- `plugins/ai-doc-driven-dev/skills/claude-md-enforcer/SKILL.md` - CLAUDE.md å¼ºåˆ¶æŠ€èƒ½
- `plugins/ai-doc-driven-dev/skills/doc-generator/SKILL.md` - æ–‡æ¡£ç”ŸæˆæŠ€èƒ½
- `plugins/ai-doc-driven-dev/knowledge/templates/requirements-template.md` - éœ€æ±‚æ–‡æ¡£æ¨¡æ¿
- `plugins/ai-doc-driven-dev/knowledge/templates/technical-design-template.md` - æŠ€æœ¯è®¾è®¡æ¨¡æ¿

## 11. Commands å’Œ Skills ä¼˜åŒ–è®¾è®¡

### 11.1 æ ¸å¿ƒè®¾è®¡æ€è·¯

åŸºäºå®˜æ–¹æœ€ä½³å®è·µï¼ˆå‚è€ƒï¼š`/Users/zhoukailian/Desktop/mySelf/claude-plugins-official/official-patterns-analysis.md`ï¼‰ï¼ŒCommands å’Œ Skills ä¼˜åŒ–éµå¾ªä»¥ä¸‹æ ¸å¿ƒæ€è·¯ï¼š

**è®¾è®¡åŸåˆ™**ï¼š
1. **ç®€æ´æ˜ç¡®**ï¼šä½¿ç”¨å®˜æ–¹æ¨èçš„ç»“æ„æ¨¡å¼
2. **æ¨¡æ¿é©±åŠ¨**ï¼šæä¾›æ ‡å‡†æ¨¡æ¿ï¼ŒAI æŒ‰æ¨¡æ¿æ‰§è¡Œ
3. **è‡ªåŠ¨åŒ–**ï¼šé€šè¿‡ CLAUDE.md è§„èŒƒæŒ‡å¯¼ AI è‡ªåŠ¨éµå¾ª
4. **è¯´åšä»€ä¹ˆï¼Œä¸è¯´æ€ä¹ˆåš**ï¼šç”¨ç®€çŸ­æŒ‡ä»¤ä»£æ›¿è¯¦ç»†æè¿°

**ä¼˜åŒ–æ–¹å¼**ï¼š
- Commandsï¼šæ·»åŠ  Contextã€Phase ç»“æ„ã€åœæ­¢ç‚¹ã€æ¡ä»¶é€»è¾‘
- Skillsï¼šä¼˜åŒ– Descriptionã€æ·»åŠ  "When This Skill Applies"ã€Phase ç»“æ„ã€è¡¨æ ¼å’Œè¯„åˆ†ç³»ç»Ÿ

**ç®€æ´å†™ä½œè§„èŒƒ**ï¼š

| åŸåˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **æŒ‡ä»¤å¼** | ä½¿ç”¨åŠ¨è¯å¼€å¤´ | "Scan existing numbers" âœ… vs "The skill will scan..." âŒ |
| **ç®€çŸ­** | æ¯æ­¥ â‰¤10 è¯ | "Create docs/ structure" âœ… vs "Create docs/ directory with requirements/, design/, standards/, and analysis/ subdirectories" âŒ |
| **çªå‡ºé‡ç‚¹** | å…³é”®æ­¥éª¤ç²—ä½“ | "**Verify numbering**" âœ… |
| **é¿å…å•°å—¦** | ä¸è¯¦è¿°å®ç° | "Populate templates" âœ… vs "Generate project-specific requirements documentation based on existing code analysis" âŒ |

**é•¿åº¦é™åˆ¶**ï¼š
- Commandsï¼šæ¯ä¸ª Phase çš„ Actions â‰¤5 ä¸ªæ­¥éª¤
- Skillsï¼šæ¯ä¸ª Phase çš„ Actions â‰¤4 ä¸ªæ­¥éª¤
- æ¯ä¸ªæ­¥éª¤æè¿° â‰¤10 è¯ï¼ˆä¸­æ–‡ â‰¤15 å­—ï¼‰

### 11.2 å®˜æ–¹æ¨¡æ¿å‚è€ƒ

æ‰€æœ‰ Commands å’Œ Skills çš„ä¼˜åŒ–åº”å‚è€ƒä»¥ä¸‹å®˜æ–¹æ¨¡æ¿ï¼š

**å‚è€ƒæ–‡æ¡£**ï¼š`claude-plugins-official/official-patterns-analysis.md`

**å…³é”®æ¨¡æ¿**ï¼š
- æ¨¡æ¿ 1: ç®€å•çš„å•æ­¥éª¤ Commandï¼ˆå¦‚ `/commit`ï¼‰
- æ¨¡æ¿ 2: å¤šé˜¶æ®µå·¥ä½œæµ Commandï¼ˆå¦‚ `/feature-dev`ï¼‰
- æ¨¡æ¿ 3: Agent åä½œ Commandï¼ˆå¦‚ `/code-review`ï¼‰
- æ¨¡æ¿ 4: åŸºç¡€ Skill
- æ¨¡æ¿ 5: å·¥ä½œæµå¼ Skillï¼ˆå¦‚ `claude-md-improver`ï¼‰

**å…³é”®æ¨¡å¼**ï¼š
- Bash å†…è”æ‰§è¡Œï¼š`!`command``
- Phase åˆ†éš”ï¼š`---`
- Goal-Actions ç»“æ„
- åœæ­¢ç‚¹ï¼š`**WAIT**`ã€`**DO NOT**`
- æ¡ä»¶é€»è¾‘ï¼š`If-Then`
- è¡¨æ ¼ç»„ç»‡ä¿¡æ¯
- è¯„åˆ†ç³»ç»Ÿï¼ˆA-Fï¼‰

### 11.3 ç®€åŒ–ç¤ºä¾‹

#### 11.3.1 Command ç®€åŒ–ç¤ºä¾‹

**å•°å—¦ç‰ˆæœ¬** âŒï¼š
```markdown
### Example 1: Complete Documentation Setup

User request: "Generate complete documentation structure for our React TypeScript project"

The skill will:
1. Create docs/ directory with requirements/, design/, standards/, and analysis/ subdirectories
2. Generate project-specific requirements documentation based on existing code analysis
3. Create technical design documents reflecting current architecture and patterns
4. Produce coding standards documentation based on extracted project conventions
5. Add appropriate frontmatter and metadata to all generated documents
```

**ç®€æ´ç‰ˆæœ¬** âœ…ï¼š
```markdown
## Phase 2: Document Creation

**Goal**: Generate numbered documents

**Actions**:
1. **Scan existing document numbers**
2. **Calculate next number**
3. Create paired documents
4. Populate using templates

**Critical**: Ensure filename number matches title number.
```

#### 11.3.2 Skill ç®€åŒ–ç¤ºä¾‹

**å•°å—¦ç‰ˆæœ¬** âŒï¼š
```markdown
description: |
  Generate standardized project documentation based on templates and project analysis.
  Use when you need to "generate project docs", "create documentation", or "setup project documentation structure".
```

**ç®€æ´ç‰ˆæœ¬** âœ…ï¼š
```markdown
description: This skill should be used when the user asks to "generate project docs",
"create documentation", or discusses "documentation setup".
```

### 11.4 å…·ä½“ä¼˜åŒ–æ¸…å•

#### 11.4.1 Commands ä¼˜åŒ–ï¼ˆ4 ä¸ªï¼‰

| Command | ä¸»è¦ä¼˜åŒ–ç‚¹ | å‚è€ƒæ¨¡æ¿ |
|---------|-----------|---------|
| init-doc-driven-dev | Contextã€Phaseã€ç®€æ´æ­¥éª¤ | æ¨¡æ¿ 2ï¼ˆå¤šé˜¶æ®µå·¥ä½œæµï¼‰ |
| enforce-doc-workflow | Goal-Actionsã€æ¡ä»¶ã€åœæ­¢ç‚¹ | æ¨¡æ¿ 2ï¼ˆå¤šé˜¶æ®µå·¥ä½œæµï¼‰ |
| analyze-docs | å·¥ä½œæµã€è¯„åˆ†ã€ç®€æ´æè¿° | æ¨¡æ¿ 3ï¼ˆAgent åä½œï¼‰ |
| extract-patterns | LSPã€ä¼˜å…ˆçº§ã€æ¡ä»¶é€»è¾‘ | æ¨¡æ¿ 2ï¼ˆå¤šé˜¶æ®µå·¥ä½œæµï¼‰ |

#### 11.4.2 Skills ä¼˜åŒ–ï¼ˆ4 ä¸ªï¼‰

| Skill | ä¸»è¦ä¼˜åŒ–ç‚¹ | å‚è€ƒæ¨¡æ¿ |
|-------|-----------|---------|
| claude-md-enforcer | Descriptionã€Whenã€Phase | æ¨¡æ¿ 5ï¼ˆå·¥ä½œæµå¼ï¼‰ |
| doc-detector | è¡¨æ ¼ã€è¯„åˆ†ã€ç®€æ´æ­¥éª¤ | æ¨¡æ¿ 5ï¼ˆå·¥ä½œæµå¼ï¼‰ |
| doc-generator | ç¼–å·æµç¨‹ã€å ä½ç¬¦ã€éªŒè¯ | æ¨¡æ¿ 5ï¼ˆå·¥ä½œæµå¼ï¼‰ |
| pattern-extractor | LSPã€ä¼˜å…ˆçº§ã€æ¡ä»¶ | æ¨¡æ¿ 5ï¼ˆå·¥ä½œæµå¼ï¼‰ |

### 11.5 å®æ–½æŒ‡å¯¼

**å®æ–½æµç¨‹**ï¼š
1. é˜…è¯»å®˜æ–¹æœ€ä½³å®è·µæ–‡æ¡£
2. é€‰æ‹©å¯¹åº”çš„æ¨¡æ¿
3. æŒ‰æ¨¡æ¿ç»“æ„é‡å†™ Commands/Skills
4. éµå¾ªç®€æ´å†™ä½œè§„èŒƒï¼ˆâ‰¤10 è¯/æ­¥éª¤ï¼‰
5. åœ¨ CLAUDE.md ä¸­æ·»åŠ è§„èŒƒè¯´æ˜
6. æµ‹è¯•éªŒè¯

**CLAUDE.md è§„èŒƒ**ï¼š
- åŒ…å«å®Œæ•´çš„ç¼–å·è§„èŒƒ
- åŒ…å« Commands/Skills å†™ä½œè§„èŒƒ
- æ˜ç¡®å‘ŠçŸ¥ AI å¿…é¡»éµå¾ªå®˜æ–¹æ¨¡æ¿
- å¼ºè°ƒç®€æ´åŸåˆ™ï¼šè¯´åšä»€ä¹ˆï¼Œä¸è¯´æ€ä¹ˆåš

**è´¨é‡æ£€æŸ¥æ¸…å•**ï¼š
- [ ] æ¯ä¸ªæ­¥éª¤ â‰¤10 è¯ï¼ˆä¸­æ–‡ â‰¤15 å­—ï¼‰
- [ ] ä½¿ç”¨æŒ‡ä»¤å¼ï¼ˆåŠ¨è¯å¼€å¤´ï¼‰
- [ ] å…³é”®æ­¥éª¤ç”¨ç²—ä½“
- [ ] é¿å…"The skill will..."æè¿°
- [ ] é¿å…è¯¦ç»†çš„å®ç°ç»†èŠ‚


## 12. å®æ–½è®¡åˆ’

### 12.1 Phase åˆ’åˆ†

**Phase 1: æ¨¡æ¿æ–‡ä»¶æ›´æ–°** â­ æœ€é«˜ä¼˜å…ˆçº§
- æ›´æ–° requirements-template.md å’Œ technical-design-template.md
- æ·»åŠ ç¼–å·å ä½ç¬¦å’Œè¯´æ˜

**Phase 2: å·¥å…·é“¾ä¸è§„èŒƒåŸºç¡€** ğŸ”´ é«˜ä¼˜å…ˆçº§
- è¡¥å…… Command/Skill æ¨¡æ¿ï¼ˆä¸­è‹±åŒè¯­ï¼‰
- æ–°å¢ frontmatter è§„èŒƒä¸é”™è¯¯ä»£ç è§„èŒƒ
- å»ºç«‹è„šæ‰‹æ¶/æ ¡éªŒ/è¿ç§»è„šæœ¬éª¨æ¶
- åˆå§‹åŒ–æµ‹è¯•ä¸ç¤ºä¾‹ç›®å½•

**Phase 3: Commands ä¼˜åŒ–** ğŸ”´ é«˜ä¼˜å…ˆçº§
- æŒ‰å®˜æ–¹æ¨¡æ¿é‡å†™ 4 ä¸ª Commands
- å‚è€ƒï¼š`claude-plugins-official/official-patterns-analysis.md`

**Phase 4: Skills ä¼˜åŒ–** ğŸ”´ é«˜ä¼˜å…ˆçº§
- æŒ‰å®˜æ–¹æ¨¡æ¿é‡å†™ 4 ä¸ª Skills
- å‚è€ƒï¼š`claude-plugins-official/official-patterns-analysis.md`

**Phase 5: CLAUDE.md è§„èŒƒ** ğŸŸ¡ ä¸­ä¼˜å…ˆçº§
- åœ¨ claude-md-enforcer ä¸­æ·»åŠ ç¼–å·è§„èŒƒç”Ÿæˆ
- æ·»åŠ  Commands/Skills å†™ä½œè§„èŒƒ

**Phase 6: æµ‹è¯•éªŒè¯** ğŸŸ¢ ä¸­ä¼˜å…ˆçº§
- æµ‹è¯•ç¼–å·ç³»ç»Ÿ
- æµ‹è¯• Commands/Skills ä¼˜åŒ–æ•ˆæœ

**Phase 7: æ–‡æ¡£æ›´æ–°** ğŸŸ¢ ä½ä¼˜å…ˆçº§
- æ›´æ–°æ’ä»¶ README
- æ·»åŠ ä½¿ç”¨æŒ‡å—

### 12.2 å·¥ä½œé‡ä¼°ç®—

| Phase | å·¥ä½œé‡ | ä¼˜å…ˆçº§ |
|-------|--------|--------|
| Phase 1 | 1-2 å°æ—¶ | ğŸ”´ æœ€é«˜ |
| Phase 2 | 2-4 å°æ—¶ | ğŸ”´ é«˜ |
| Phase 3 | 4-6 å°æ—¶ | ğŸ”´ é«˜ |
| Phase 4 | 4-6 å°æ—¶ | ğŸ”´ é«˜ |
| Phase 5 | 1-2 å°æ—¶ | ğŸŸ¡ ä¸­ |
| Phase 6 | 3-4 å°æ—¶ | ğŸŸ¢ ä¸­ |
| Phase 7 | 1-2 å°æ—¶ | ğŸŸ¢ ä½ |
| **æ€»è®¡** | **16-26 å°æ—¶** | - |

## 13. æ–‡ä»¶å˜æ›´æ¸…å•

### 13.1 æ¨¡æ¿æ–‡ä»¶

- `plugins/ai-doc-driven-dev/knowledge/templates/requirements-template.md`
- `plugins/ai-doc-driven-dev/knowledge/templates/technical-design-template.md`

### 13.2 Commandsï¼ˆ4 ä¸ªï¼‰

- `plugins/ai-doc-driven-dev/commands/init-doc-driven-dev.md`
- `plugins/ai-doc-driven-dev/commands/enforce-doc-workflow.md`
- `plugins/ai-doc-driven-dev/commands/analyze-docs.md`
- `plugins/ai-doc-driven-dev/commands/extract-patterns.md`

### 13.3 Skillsï¼ˆ4 ä¸ªï¼‰

- `plugins/ai-doc-driven-dev/skills/claude-md-enforcer/SKILL.md`
- `plugins/ai-doc-driven-dev/skills/doc-detector/SKILL.md`
- `plugins/ai-doc-driven-dev/skills/doc-generator/SKILL.md`
- `plugins/ai-doc-driven-dev/skills/pattern-extractor/SKILL.md`

## 14. ç›¸å…³æ–‡æ¡£

- `docs/requirements/009-document-numbering-system.md` - éœ€æ±‚æ–‡æ¡£
- `docs/analysis/skills-optimization-analysis.md` - Skills ä¼˜åŒ–åˆ†æ
- `/Users/zhoukailian/Desktop/mySelf/claude-plugins-official/official-patterns-analysis.md` - å®˜æ–¹æœ€ä½³å®è·µ

## 15. å˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|------|------|------|----------|
| 1.0.0 | 2026-01-31 | AI | åˆå§‹ç‰ˆæœ¬ - ç¼–å·ç³»ç»Ÿå’Œ Commands/Skills ä¼˜åŒ–è®¾è®¡ |

---

*æ­¤æŠ€æœ¯æ–¹æ¡ˆå°†æŒ‡å¯¼å…·ä½“çš„å¼€å‘å®ç°ï¼Œç¡®ä¿æŠ€æœ¯é€‰æ‹©çš„åˆç†æ€§å’Œå¯è¡Œæ€§ã€‚*
